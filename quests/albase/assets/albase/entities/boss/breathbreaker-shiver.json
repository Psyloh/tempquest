{
  "inheritFrom": "game:entities/lore/shiver",
  "code": "breathbreaker-shiver",
  "class": "EntityShiver",
  "tags": ["rust-creature", "habitat-land"],
  "variantgroups": [
    { "code": "type", "states": ["bellhead"] }
  ],
  "canClimb": true,
  "hitboxSize": { "x": 2.4, "y": 2.0 },
  "deadHitboxSize": { "x": 1.4, "y": 1.4 },
  "eyeHeight": 2.6,
  "attributes": {
    "killedByInfoText": "deadcreature-vile",
    "reckless": true,
    "vsquestSoundPitchMul": 0.55,
    "alegacyvsquestHideInfoText": true
  },
  "drops": [],
  "client": {
    "renderer": "Shape",
    "pitchStep": false,
    "size": 2,
    "shapeByType": {
      "*-bellhead": { "base": "game:entity/lore/shiver/bellhead" }
    },
    "texturesByType": {
      "*-bellhead": {
        "skin": { "base": "game:entity/lore/shiver/bellhead" }
      }
    },
    "behaviors": [
      { "code": "repulseagents" },
      { "code": "controlledphysics", "stepHeight": 2.1251 },
      { "code": "floatupwhenstuck", "onlyWhenDead": true },
      { "code": "interpolateposition" },
      { "code": "boss", "bossHpBarRange": 90 },
      { "code": "bossmusicurl", "musicKey": "theme_bosshunt_2", "range": 160, "startRange": 35, "combatTimeoutMs": 12000, "requireRecentDamage": true, "startOnTarget": true, "playInIdle": false, "fadeOutSeconds": 2, "usePhases": true, "phaseSwitching": false, "phases": [ { "whenHealthRelBelow": 0.7, "startAtSeconds": 60 }, { "whenHealthRelBelow": 0.3, "startAtSeconds": 120 } ] },
      { "code": "bossnametag", "nameLangKey": "item-creature-breathbreaker-shiver", "color": "#ff0000", "backgroundColor": "#000000", "backgroundOpacity": 0.35, "renderRange": 120 }
    ],
    "animations": [
      { "code": "hurt", "animation": "hurt", "animationSpeed": 1, "weight": 100, "easeInSpeed": 100, "blendMode": "Add" },
      { "code": "run", "animation": "run", "animationSpeed": 1, "weight": 1, "blendMode": "Average" },
      { "code": "walk", "animation": "walk", "animationSpeed": 1, "weight": 1, "blendMode": "Average" },
      { "code": "swipe", "animation": "swipe", "animationSpeed": 1, "weight": 100, "blendMode": "Average" },
      { "code": "bite", "animation": "bite", "animationSpeed": 1, "weight": 100, "blendMode": "Average" },
      { "code": "die", "animation": "Death", "animationSpeed": 1, "weight": 10, "blendMode": "Average", "triggeredBy": { "onControls": ["dead"] } },
      { "code": "idle", "animation": "idle", "blendMode": "Average", "triggeredBy": { "defaultAnim": true } },
      { "code": "despair", "animation": "Despair", "weight": 8, "easeOutSpeed": 20, "weightCapFactor": 0.5, "blendMode": "Average", "supressDefaultAnimation": true }
    ]
  },
  "server": {
    "behaviors": [
      { "code": "repulseagents" },
      { "code": "controlledphysics", "stepHeight": 2.1251 },
      { "code": "health", "currenthealth": 320, "maxhealth": 320 },
      { "code": "bosscombatmarker", "trackBossHuntDamageLock": true },
      { "code": "bosshastargetsync" },
      { "code": "questtarget", "targetId": "albase:bosshunt:breathbreaker", "leashRange": 120, "returnMoveSpeed": 0.07, "leashCheckMs": 1000 },
      {
        "code": "bossoxygendrainaura",
        "stages": [
          { "whenHealthRelBelow": 1.0, "range": 24, "oxygenDrainPerSecond": 520, "intervalMs": 500, "minOxygenRel": 0.05 },
          { "whenHealthRelBelow": 0.5, "range": 30, "oxygenDrainPerSecond": 720, "intervalMs": 450, "minOxygenRel": 0.05 }
        ]
      },
      {
        "code": "bossgrab",
        "stages": [
          { "whenHealthRelBelow": 0.8, "cooldownSeconds": 13, "minTargetRange": 0, "maxTargetRange": 3.0, "windupMs": 220, "grabMs": 2200, "victimWalkSpeedMult": 0.08, "damageIntervalMs": 550, "damage": 1.9, "damageTier": 4, "damageType": "PiercingAttack", "windupAnimation": "swipe", "grabAnimation": "bite", "sound": "albase:shock-sound-effect-horror", "soundRange": 24, "soundStartMs": 0, "soundVolume": 0.2 },
          { "whenHealthRelBelow": 0.4, "cooldownSeconds": 10, "minTargetRange": 0, "maxTargetRange": 3.4, "windupMs": 180, "grabMs": 2500, "victimWalkSpeedMult": 0.06, "damageIntervalMs": 500, "damage": 2.2, "damageTier": 4, "damageType": "PiercingAttack", "windupAnimation": "swipe", "grabAnimation": "bite", "sound": "albase:shock-sound-effect-horror", "soundRange": 26, "soundStartMs": 0, "soundVolume": 0.2 }
        ]
      },
      {
        "code": "bossteleport",
        "stages": [
          { "whenHealthRelBelow": 0.8, "cooldownSeconds": 10, "minTargetRange": 8, "maxTargetRange": 30, "minRadius": 4, "maxRadius": 8, "tries": 10, "windupMs": 200, "windupAnimation": "idle", "arriveAnimation": "swipe", "sound": "weather/lightning-verynear", "soundRange": 32, "soundStartMs": 0, "requireSolidGround": true },
          { "whenHealthRelBelow": 0.35, "cooldownSeconds": 8, "minTargetRange": 8, "maxTargetRange": 34, "minRadius": 5, "maxRadius": 9, "tries": 12, "windupMs": 180, "windupAnimation": "idle", "arriveAnimation": "bite", "sound": "weather/lightning-verynear", "soundRange": 36, "soundStartMs": 0, "requireSolidGround": true }
        ]
      },
      {
        "code": "bossdash",
        "stages": [
          { "whenHealthRelBelow": 0.75, "cooldownSeconds": 9, "minTargetRange": 6, "maxTargetRange": 24, "windupMs": 220, "dashMs": 320, "dashSpeed": 1.5, "windupAnimation": "idle", "dashAnimation": "run", "sound": "game:creature/shiver/aggro", "soundRange": 24, "soundStartMs": 0, "soundVolume": 0.18 },
          { "whenHealthRelBelow": 0.4, "cooldownSeconds": 7, "minTargetRange": 7, "maxTargetRange": 28, "windupMs": 180, "dashMs": 340, "dashSpeed": 1.7, "windupAnimation": "idle", "dashAnimation": "run", "sound": "game:creature/shiver/aggro", "soundRange": 28, "soundStartMs": 0, "soundVolume": 0.18 }
        ]
      },
      {
        "code": "bossformswap",
        "alternateEntityCode": "albase:breathbreaker",
        "swapChance": 1,
        "whenHealthRelBelow": 0.95,
        "cooldownSeconds": 16,
        "checkIntervalMs": 1500,
        "requireTarget": true,
        "keepHealthFraction": true,
        "sound": "albase:dark-magic-charge-up",
        "soundRange": 32,
        "soundStartMs": 0
      },
      {
        "code": "taskai",
        "aitasks": [
          {
            "code": "meleeattack",
            "entityCodes": ["player"],
            "priority": 2,
            "damage": 16,
            "damageTier": 4,
            "minDist": 3.2,
            "minVerDist": 2.6,
            "attackAngleRangeDeg": 120,
            "mincooldown": 300,
            "maxcooldown": 900,
            "damagePlayerAtMs": 250,
            "attackDurationMs": 600,
            "animation": "swipe",
            "animationSpeed": 1
          },
          {
            "code": "meleeattack",
            "entityCodes": ["player"],
            "priority": 2.3,
            "damage": 22,
            "damageTier": 5,
            "minDist": 4.6,
            "minVerDist": 3.4,
            "attackAngleRangeDeg": 140,
            "mincooldown": 2200,
            "maxcooldown": 3200,
            "damagePlayerAtMs": 420,
            "attackDurationMs": 900,
            "animation": "bite",
            "animationSpeed": 1
          },
          {
            "code": "seekentity",
            "entityCodes": ["player"],
            "priority": 1.5,
            "mincooldown": 100,
            "maxcooldown": 250,
            "movespeed": 0.12,
            "seekingRange": 45,
            "maxFollowTime": 300,
            "searchWaitMs": 500,
            "executionChance": 1,
            "animationSpeed": 1.3,
            "animation": "run"
          },
          {
            "code": "wander",
            "priority": 1.0,
            "movespeed": 0.04,
            "animationSpeed": 1,
            "animation": "walk",
            "preferredLightLevel": 15
          },
          { "code": "lookaround", "priority": 0.5 }
        ]
      },
      { "code": "deaddecay", "hoursToDecay": 999999 },
      { "code": "bossrespawn", "respawnInGameHours": 24, "spawnNewBoss": false },
      { "code": "floatupwhenstuck", "onlyWhenDead": true }
    ]
  },
  "idleSoundRange": 32,
  "sounds": {
    "hurt": "game:creature/shiver/hurt",
    "death": "game:creature/shiver/death",
    "idle": "game:creature/shiver/idle*"
  }
}
