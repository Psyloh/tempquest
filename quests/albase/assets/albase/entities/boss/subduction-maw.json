{
  "inheritFrom": "game:entities/lore/bowtorn",
  "code": "subduction-maw",
  "class": "EntityAgent",
  "tags": ["rust-creature", "habitat-land", "horror"],
  "variantgroups": [],
  "hitboxSize": { "x": 1.9, "y": 4.8 },
  "deadHitboxSize": { "x": 2.8, "y": 2.0 },
  "eyeHeight": 3.8,
  "attributes": {
    "killedByInfoText": "deadcreature-vile",
    "reckless": true,
    "vsquestSoundPitchMul": 0.6,
    "SoundVolumeMulBySound": { "albase:dark-magic-charge-up": 0.55, "albase:breath-out": 0.45 },
    "alegacyvsquestHideInfoText": true
  },
  "drops": [],
  "client": {
    "renderer": "Shape",
    "size": 2.0,
    "pitchStep": false,
    "shapeByType": {
      "*": { "base": "game:entity/lore/bowtorn/gearfoot" }
    },
    "texturesByType": {
      "*": {
        "skin": { "base": "albase:boss-subduction-maw-gearfoot" }
      }
    },
    "behaviors": [
      { "code": "repulseagents" },
      { "code": "controlledphysics", "stepHeight": 1.1251 },
      { "code": "floatupwhenstuck", "onlyWhenDead": true },
      { "code": "interpolateposition" },
      { "code": "boss", "bossHpBarRange": 90 },
      { "code": "bossmusicurl", "musicKey": "theme_bosshunt_subduction_maw", "range": 160, "startRange": 35, "combatTimeoutMs": 20000, "fadeOutSeconds": 4, "usePhases": true, "phaseSwitching": false, "phases": [ { "whenHealthRelBelow": 0.7, "startAtRel": 0.33333334 }, { "whenHealthRelBelow": 0.3, "startAtRel": 0.6666667 } ] },
      { "code": "bossnametag", "nameLangKey": "item-creature-subduction-maw", "color": "#ff0000", "backgroundColor": "#000000", "backgroundOpacity": 0.35, "renderRange": 120 }
    ],
    "animations": [
      { "code": "hurt", "animation": "hurt", "animationSpeed": 2, "weight": 10, "blendMode": "AddAverage" },
      { "code": "die", "animation": "die", "animationSpeed": 1, "weight": 10, "blendMode": "Average", "triggeredBy": { "onControls": ["dead"] } },
      { "code": "idle", "animation": "idle", "blendMode": "Average", "triggeredBy": { "defaultAnim": true } },
      { "code": "walk", "animation": "walk", "blendMode": "Average" },
      { "code": "run", "animation": "run", "blendMode": "Average" },
      { "code": "turret", "animation": "turret", "blendMode": "Average" },
      { "code": "load", "animation": "load", "blendMode": "Average" },
      { "code": "hold", "animation": "hold", "blendMode": "Average" },
      { "code": "unload", "animation": "unload", "blendMode": "Average" },
      { "code": "reload", "animation": "reload", "blendMode": "Average" },
      { "code": "stab", "animation": "stab", "blendMode": "Average" }
    ]
  },
  "server": {
    "behaviors": [
      { "code": "repulseagents" },
      { "code": "controlledphysics", "stepHeight": 1.1251 },
      { "code": "bossdamagesourceimmunity", "ignoreWeather": true, "ignoreExplosion": true, "ignoreElectricity": true, "onlyAllowPlayerDamage": true },
      { "code": "health", "currenthealth": 560, "maxhealth": 560 },
      { "code": "bosscombatmarker", "trackBossHuntDamageLock": true },
      { "code": "bosshastargetsync" },
      { "code": "questtarget", "targetId": "albase:bosshunt:subduction-maw", "leashRange": 120, "returnMoveSpeed": 0.06, "leashCheckMs": 1000 },
      {
        "code": "bossintermissiondispel",
        "stages": [
          {
            "whenHealthRelBelow": 0.7,
            "cooldownSeconds": 35,
            "intermissionMaxMs": 7500,
            "freezeBoss": true,
            "lockYaw": true,
            "incomingDamageMultiplier": 0.25,
            "spawnRange": 10,
            "adds": [
              {
                "entityCode": "game:shiver-surface",
                "maxNearby": 6,
                "nearbyRange": 28,
                "minCount": 1,
                "maxCount": 2,
                "chance": 1.0,
                "spawnDelayMs": 300
              }
            ],
            "animation": "turret",
            "animationStopMs": 2400,
            "sound": "effect/translocate-active",
            "soundRange": 40,
            "soundStartMs": 0,
            "loopSound": "effect/translocate-idle",
            "loopSoundRange": 22,
            "loopSoundIntervalMs": 900
          },
          {
            "whenHealthRelBelow": 0.3,
            "cooldownSeconds": 28,
            "intermissionMaxMs": 9000,
            "freezeBoss": true,
            "lockYaw": true,
            "incomingDamageMultiplier": 0.25,
            "spawnRange": 12,
            "adds": [
              {
                "entityCode": "game:shiver-surface",
                "maxNearby": 6,
                "nearbyRange": 30,
                "minCount": 2,
                "maxCount": 3,
                "chance": 1.0,
                "spawnDelayMs": 250
              }
            ],
            "animation": "load",
            "animationStopMs": 2600,
            "sound": "effect/translocate-active",
            "soundRange": 40,
            "soundStartMs": 0,
            "loopSound": "effect/translocate-idle",
            "loopSoundRange": 22,
            "loopSoundIntervalMs": 850
          }
        ]
      },
      {
        "code": "bossintoxaura",
        "stages": [
          { "whenHealthRelBelow": 0.75, "range": 26, "intoxication": 0.55, "intervalMs": 350 },
          { "whenHealthRelBelow": 0.45, "range": 32, "intoxication": 0.85, "intervalMs": 320 },
          { "whenHealthRelBelow": 0.2, "range": 38, "intoxication": 1.1, "intervalMs": 280 }
        ]
      },
      {
        "code": "bossrepulsestun",
        "stages": [
          {
            "whenHealthRelBelow": 0.9,
            "cooldownSeconds": 7,
            "range": 4.2,
            "knockbackStrength": 0.45,
            "maxPlayerMotion": 0.75,
            "stunMs": 1800,
            "victimWalkSpeedMult": 0.0,
            "sound": "albase:deathmagic",
            "soundRange": 24,
            "soundStartMs": 0,
            "soundVolume": 0.35
          },
          {
            "whenHealthRelBelow": 0.35,
            "cooldownSeconds": 6,
            "range": 4.8,
            "knockbackStrength": 0.55,
            "maxPlayerMotion": 0.9,
            "stunMs": 2100,
            "victimWalkSpeedMult": 0.0,
            "sound": "albase:deathmagic",
            "soundRange": 26,
            "soundStartMs": 0,
            "soundVolume": 0.35
          }
        ]
      },
      {
        "code": "bosscloning",
        "stages": [
          { "whenHealthRelBelow": 0.8, "cloneCount": 2, "durationMs": 9000, "cooldownSeconds": 12, "spawnRange": 7, "cloneDamageMult": 0.7, "cloneWalkSpeedMult": 1.1, "cloneInvulnerable": true },
          { "whenHealthRelBelow": 0.66, "cloneCount": 3, "durationMs": 9000, "cooldownSeconds": 12, "spawnRange": 8, "cloneDamageMult": 0.65, "cloneWalkSpeedMult": 1.15, "cloneInvulnerable": true },
          { "whenHealthRelBelow": 0.4, "cloneCount": 5, "durationMs": 11000, "cooldownSeconds": 11, "spawnRange": 8, "cloneDamageMult": 0.6, "cloneWalkSpeedMult": 1.2, "cloneInvulnerable": true }
        ]
      },
      {
        "code": "bossteleport",
        "stages": [
          { "whenHealthRelBelow": 0.6, "cooldownSeconds": 10, "minTargetRange": 10, "maxTargetRange": 42, "minRadius": 3, "maxRadius": 8, "tries": 12, "windupMs": 250, "windupAnimation": "turret", "arriveAnimation": "stab", "sound": "albase:dark-magic-charge-up", "soundRange": 40, "soundStartMs": 0, "soundVolume": 0.25, "requireSolidGround": true, "teleportClones": true, "swapWithClones": true },
          { "whenHealthRelBelow": 0.3, "cooldownSeconds": 8, "minTargetRange": 8, "maxTargetRange": 40, "minRadius": 5, "maxRadius": 8, "tries": 12, "windupMs": 220, "windupAnimation": "load", "arriveAnimation": "stab", "sound": "albase:breath-out", "soundRange": 40, "soundStartMs": 0, "soundVolume": 0.25, "requireSolidGround": true, "teleportClones": true, "swapWithClones": true }
        ]
      },
      {
        "code": "bosstrapclone",
        "stages": [
          {
            "whenHealthRelBelow": 0.8,
            "cooldownSeconds": 10,
            "minTargetRange": 6,
            "maxTargetRange": 32,
            "trapEntityCode": "albase:subduction-maw-trap",
            "spawnRange": 6,
            "trapCount": 3,
            "windupMs": 160,
            "windupAnimation": "load",
            "fuseMs": 1500,
            "explosionRadius": 4.2,
            "explosionDamage": 26.0,
            "damageTier": 3,
            "damageType": "PiercingAttack",
            "trapInvulnerable": true,
            "sound": "albase:horror-hit",
            "soundRange": 32,
            "soundStartMs": 0,
            "soundVolume": 0.25,
            "explodeSound": "effect/smallexplosion",
            "explodeSoundRange": 34,
            "explodeSoundVolume": 0.35
          },
          {
            "whenHealthRelBelow": 0.35,
            "cooldownSeconds": 8,
            "minTargetRange": 5,
            "maxTargetRange": 36,
            "trapEntityCode": "albase:subduction-maw-trap",
            "spawnRange": 7,
            "trapCount": 5,
            "windupMs": 140,
            "windupAnimation": "reload",
            "fuseMs": 1300,
            "explosionRadius": 4.8,
            "explosionDamage": 32.0,
            "damageTier": 4,
            "damageType": "PiercingAttack",
            "trapInvulnerable": true,
            "sound": "albase:breath-out",
            "soundRange": 34,
            "soundStartMs": 0,
            "soundVolume": 0.25,
            "explodeSound": "effect/smallexplosion",
            "explodeSoundRange": 36,
            "explodeSoundVolume": 0.35
          }
        ]
      },
      {
        "code": "bossrandomlightning",
        "stages": [
          {
            "whenHealthRelBelow": 0.8,
            "minCount": 1,
            "maxCount": 2,
            "cooldownSeconds": 14,
            "minRadius": 4,
            "maxRadius": 16,
            "warningSound": "albase:warning",
            "warningSoundRange": 32,
            "warningSoundVolume": 0.56,
            "warningDelayMs": 3000,
            "chance": 0.75
          },
          {
            "whenHealthRelBelow": 0.5,
            "minCount": 2,
            "maxCount": 3,
            "cooldownSeconds": 12,
            "minRadius": 4,
            "maxRadius": 18,
            "warningSound": "albase:warning",
            "warningSoundRange": 34,
            "warningSoundVolume": 0.56,
            "warningDelayMs": 3000,
            "chance": 0.85
          },
          {
            "whenHealthRelBelow": 0.25,
            "minCount": 2,
            "maxCount": 4,
            "cooldownSeconds": 11,
            "minRadius": 3,
            "maxRadius": 20,
            "warningSound": "albase:warning",
            "warningSoundRange": 36,
            "warningSoundVolume": 0.56,
            "warningDelayMs": 2500,
            "chance": 0.9
          }
        ]
      },
      {
        "code": "bosssummonritual",
        "stages": [
          {
            "whenHealthRelBelow": 0.75,
            "cooldownSeconds": 12,
            "entityCode": "game:shiver-surface",
            "maxNearby": 4,
            "nearbyRange": 28,
            "minCount": 1,
            "maxCount": 2,
            "ritualMs": 1900,
            "spawnRange": 8,
            "animation": "load",
            "sound": "game:effect/translocate-breakdimension",
            "soundRange": 36,
            "soundStartMs": 0,
            "spawnDelayMs": 250
          },
          {
            "whenHealthRelBelow": 0.4,
            "cooldownSeconds": 10,
            "entityCode": "game:shiver-surface",
            "maxNearby": 6,
            "nearbyRange": 30,
            "minCount": 2,
            "maxCount": 3,
            "ritualMs": 1800,
            "spawnRange": 10,
            "animation": "reload",
            "sound": "game:effect/translocate-breakdimension",
            "soundRange": 40,
            "soundStartMs": 0,
            "spawnDelayMs": 220
          }
        ]
      },
      {
        "code": "taskai",
        "aitasks": [
          {
            "code": "meleeattack",
            "entityCodes": ["player"],
            "priority": 4,
            "damage": 29.5,
            "damageTier": 4,
            "mincooldown": 220,
            "maxcooldown": 420,
            "maxAttackDistance": 11.5,
            "maxAttackVerticalDistance": 5.5,
            "attackAngleRangeDeg": 180,
            "retaliateAttacks": false,
            "damagePlayerAtMs": 320,
            "attackDurationMs": 1000,
            "animation": "stab",
            "animationSpeed": 2.1,
            "sound": "game:creature/drifter-hit",
            "soundStartMs": 400
          },
          {
            "code": "getoutofwater",
            "priority": 2.5,
            "movespeed": 0.02,
            "animation": "swim",
            "animationSpeed": 1.55
          },
          {
            "code": "stayinrange",
            "entityCodes": ["player"],
            "priority": 2,
            "searchRange": 30,
            "targetRange": 12,
            "targetRangeTolerance": 3,
            "ignoreDeepDayLight": true,
            "cancelOnHurt": true,
            "retaliateAttacks": false,
            "executionChance": 0.05,
            "movespeed": 0.048,
            "animation": "walk",
            "animationSpeed": 2.8
          },
          {
            "code": "turretmode",
            "priority": 1.5,
            "priorityForCancel": 3.5,
            "sensingRange": 28,
            "firingRangeMin": 8,
            "firingRangeMax": 22,
            "abortRange": 9,
            "projectileDamage": 18.5,
            "projectileDamageTier": 2,
            "projectileCode": "game:bowtornprojectile",
            "retaliateAttacks": false,
            "throwAtMs": 400
          },
          {
            "code": "idle",
            "priority": 1.25,
            "priorityForCancel": 1.35,
            "minduration": 8000,
            "maxduration": 8000,
            "mincooldown": 60000,
            "maxcooldown": 180000,
            "animation": "Contort",
            "animationSpeed": 1
          },
          {
            "code": "wander",
            "priority": 1.0,
            "movespeed": 0.018,
            "animation": "walk",
            "animationSpeed": 1.5,
            "preferredLightLevel": 15
          },
          { "code": "lookaround", "priority": 0.5 }
        ]
      },
      { "code": "deaddecay", "hoursToDecay": 999999 },
      { "code": "bossrespawn", "respawnInGameHours": 24, "spawnNewBoss": false },
      { "code": "floatupwhenstuck", "onlyWhenDead": true }
    ]
  },
  "idleSoundRange": 18,
  "sounds": {
    "hurt": "game:creature/bowtorn/hurt",
    "death": "game:creature/bowtorn/death",
    "idle": "game:creature/bowtorn/idle"
  }
}
